<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>School Tools Hub</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f4f6f8;
    margin: 0; padding: 0;
  }
  header {
    background-color: #0d47a1;
    color: #fff;
    padding: 25px 20px;
    text-align: center;
  }
 header img.logo {
    display: block;
    margin: 80px auto 15px; /* â¬… moved down */
    width: 110px;
    max-width: 40%;
}

  }
  header h1 { margin: 0; font-size: 2.5em; }
  header p { font-size: 1.1em; max-width: 800px; margin: 10px auto; color: #e0e0e0; line-height: 1.6; }

  .container { max-width: 1400px; margin: auto; padding: 20px; }
  .categories { display: flex; flex-wrap: wrap; gap: 4%; margin-bottom: 30px; }
  .category {
    flex: 0 0 48%;
    background-color: #fff;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    overflow: hidden;
    transition: 0.3s;
  }
  .category:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
  .category-header {
    background-color: #1976d2;
    color: #fff;
    padding: 20px;
    font-weight: bold;
    font-size: 1.5em;
    text-align: center;
  }
  .tools {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 12px;
    padding: 20px;
  }
  .tools a {
    display: block;
    padding: 15px;
    background-color: #e3f2fd;
    text-decoration: none;
    color: #0d47a1;
    text-align: center;
    border-radius: 10px;
    transition: 0.3s;
    font-size: 1.1em;
    font-weight: 600;
  }
  .tools a:hover { background-color: #bbdefb; transform: scale(1.05); }
  @media (max-width: 768px) { .category { flex: 0 0 100%; } }

  footer {
    text-align: center;
    padding: 20px 0;
    background-color: #0d47a1;
    color: #fff;
    font-size: 0.9em;
  }
  footer a { color: #ffeb3b; text-decoration: none; }

  /* LOGIN OVERLAY */
  #loginOverlay {
    position:fixed; inset:0; z-index:10000;
    background:rgba(255,255,255,0.3);
    display:flex; align-items:center; justify-content:center;
    pointer-events:all;
    font-family:Segoe UI,sans-serif;
  }
  #loginOverlay button {
    background:#4285F4; color:#fff; border:none;
    padding:14px 22px; border-radius:8px;
    font-size:16px; font-weight:600; cursor:pointer;
  }

  /* PAGE LOCK */
  #pageLock {
    position:fixed; inset:0; z-index:9998;
    display:flex; align-items:center; justify-content:center;
    pointer-events:all;
  }
  #pageLock div {
    background:#fff; padding:12px 18px; border-radius:10px; font-weight:600;
    box-shadow:0 4px 15px rgba(0,0,0,.2);
  }

  /* ACCESS MODAL */
  #accessModal {
    position:fixed; inset:0; z-index:9999;
    background:rgba(0,0,0,.6); display:none;
    align-items:center; justify-content:center;
  }
  #accessModal div {
    background:#fff; padding:25px 30px; border-radius:12px; max-width:400px;
    text-align:center; color:#033a63; box-shadow:0 6px 20px rgba(0,0,0,0.3);
  }
  #accessModal button {
    background:#0078D7; color:#fff; border:none; padding:12px 20px;
    border-radius:8px; font-weight:600; cursor:pointer; font-size:1em;
  }

  /* COUNTDOWN */
  #accessCountdown {
    position:fixed; top:100px; left:10px;
    background:#0078D7; color:#fff; padding:12px 16px; border-radius:8px;
    display:none; font-weight:600;
  }
</style>
</head>
<body>

<header>
  <img src="https://static.wixstatic.com/media/9ba186_61b351de3531446995b426f1c49950ed~mv2.png" alt="Elimu Connect Logo" class="logo"/>
  <h1>Smart Elimu Connect</h1>
  <p>Your centralized education hub. From attendance, competency tracking, and STEM learning, to lesson planning and communication â€” everything in one place.</p>
  <p>Access teaching resources, math & science tools, language aids, educational games, and external learning platforms â€” all organized for easy use.</p>
</header>

<div class="container">

  <!-- ELIMU CONNECT -->
  <div class="categories">
    <div class="category">
      <div class="category-header">General Tools</div>
      <div class="tools">
	   
  <li><a href="https://wisdomappweb.site" target="_blank" title="Get affordable websites for schools and educational institutions.">Affordable Schools Websites</a></li>
  <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/register4" target="_blank" title="Manage and track student attendance easily with a smart digital register.">Smart Register</a></li>
  <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/acbl.html" target="_blank" title="Record, track, and showcase student projects and competency-based learning portfolios.">Projects & CBL Portfolio</a></li>
  <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/projects" target="_blank" title="Generate activities and projects automatically for classroom use.">Activities/Projects Generator</a></li>
  <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/homeworkbest.html" target="_blank" title="Create, assign, and track homework efficiently for your students.">Homework Smart System</a></li>
  <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/driver" target="_blank" title="Track school bus routes and driver information in real-time.">School Bus Tracking - Driver Phase</a></li>
  <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/parents" target="_blank" title="Parents can track the school bus and student activities for safety and updates.">School Bus Tracking - Parents Phase</a></li>
  <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/competencytracker" target="_blank" title="Monitor student competencies and performance across subjects.">Competencies Tracker</a></li>
  <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/fortutor4" target="_blank" title="AI-powered assistant to help teachers plan lessons and answer queries.">AI Teaching Assistant</a></li>
  <li><a href="https://wisdomappweb.site/mappingteachers" target="_blank" title="Map teacher-student physical locations for classroom planning and management.">Teacher-student Physical Mapping</a></li>
  <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/club" target="_blank" title="Manage STEM clubs, track activities, and engage students in science, tech, and innovation.">STEMLa Club</a></li>
  <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/parentengagement" target="_blank" title="Connect with parents for updates, notifications, and student progress tracking.">Parent Connect</a></li>
 
  <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/game" target="_blank" title="Engage students with competitive quizzes and interactive games.">Compete & Win</a></li>
  <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/adverts" target="_blank" title="Learn coding and programming skills through interactive lessons and projects.">Learn to Code</a></li>


	 </div>
      </div>
    

    
    <div class="category">
      <div class="category-header">MathX Tools</div>
       <div class="tools">
 
  
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/mathformulars" target="_blank" title="Access common mathematics formulas for easy reference and calculations.">Math Formulas</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/mathgraphs" target="_blank" title="Plot and analyze graphs of different mathematical functions.">Math Graphs</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/transformation" target="_blank" title="Explore geometric transformations like translation, rotation, reflection, and scaling.">Transformation</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/tables" target="_blank" title="View multiplication, division, and other mathematical tables.">Math Tables</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/trigonometry" target="_blank" title="Understand trigonometry using the unit circle.">Trigonometry (Unit Circle)</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/sohcahtoa" target="_blank" title="Use SOHCAHTOA to solve right-angle triangle problems.">Trigonometry (SOHCAHTOA)</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/areas" target="_blank" title="Calculate areas of various geometric shapes.">Area</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/volumes" target="_blank" title="Calculate volumes of 3D objects and solids.">Volume</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/quadraticsolver" target="_blank" title="Solve quadratic equations quickly using the solver tool.">Quadratic Solver</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/statistics" target="_blank" title="Perform statistical calculations and understand data sets.">Statistics</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/vectors" target="_blank" title="Learn and solve vector-related problems in physics and mathematics.">Vectors</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/matrix1" target="_blank" title="Perform basic matrix operations like addition and multiplication.">Matrix 1</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/matrix2" target="_blank" title="Work with advanced matrix operations including inverses and determinants.">Matrix 2</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/long&lat" target="_blank" title="Calculate longitude and latitude values and understand coordinates.">Longitude & Latitude</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/differentiate&integrate" target="_blank" title="Perform differentiation and integration for calculus problems.">Differentiation & Integration</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/area%20approximation" target="_blank" title="Use mid-ordinate and trapezium methods to approximate areas.">Mid-ordinate & Trapezium</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/integrationarea" target="_blank" title="Calculate approximate area under curves using integration.">Integration Area Approx.</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/error" target="_blank" title="Understand and calculate errors in measurements and calculations.">Error</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/logs" target="_blank" title="Work with logarithms for calculations and problem solving.">Logarithms</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/commercial1" target="_blank" title="Calculate simple and compound interest for financial mathematics.">Interest (Simple & Compound)</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/incometax" target="_blank" title="Understand and calculate income tax problems.">Income Tax</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/variations" target="_blank" title="Learn direct and inverse variations in algebra.">Variations</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/binomial" target="_blank" title="Use binomial expansion to simplify algebraic expressions.">Binomial Expansion</a></li>
 
</div>

      </div>
   
 
  
  
  
    <div class="category">
      <div class="category-header">ChemX Tools</div>
       <div class="tools">

 
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/chemreactions" target="_blank" title="Explore different chemical reactions, balancing equations and reaction types.">Chem Reactions</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/moleconcept" target="_blank" title="Understand the mole concept and calculations involving Avogadro's number.">Mole Concept</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/organicchem" target="_blank" title="Study organic chemistry topics including hydrocarbons and functional groups.">Organic Chemistry</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/periodictable" target="_blank" title="View the periodic table and understand element properties and groups.">Periodic Table</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/commongases" target="_blank" title="Learn about common gases, their properties, and chemical behavior.">Common Gases</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/chemgraphs" target="_blank" title="Analyze chemical graphs, concentration curves, and reaction rates.">Chem Graphs</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/chemformulars" target="_blank" title="Access essential chemistry formulas for calculations and experiments.">Chem Formulas</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/chemicalformula&quations" target="_blank" title="Learn to write and balance chemical formulas and equations.">Chemical Formulas & Equations</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/gaslaws" target="_blank" title="Study the different gas laws like Boyle's, Charles', and Avogadro's laws.">Gas Laws</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/diffusionlaw" target="_blank" title="Understand diffusion laws and principles in gases and liquids.">Diffusion Law</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/ram" target="_blank" title="Learn about relative atomic mass (R.A.M) and molecular mass calculations.">R.A.M</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/molesmassmm" target="_blank" title="Calculate moles, mass, and molar mass for chemical substances.">Moles, Mass, Molar Mass</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/empiricalmolecular" target="_blank" title="Determine empirical and molecular formulas from experimental data.">Empirical & Molecular</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/titrations" target="_blank" title="Perform and understand titration experiments and calculations.">Titrations</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/radioactivity" target="_blank" title="Study radioactivity, decay, and nuclear reactions.">Radioactivity</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/solubility" target="_blank" title="Understand solubility, saturation, and solubility product principles.">Solubility</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/bondenergies" target="_blank" title="Learn about bond energies and calculations involving chemical bonds.">Bond Energies</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/thermochemistry" target="_blank" title="Explore thermochemistry, enthalpy changes, and energy calculations.">Thermochemistry</a></li>
 

      </div>
    </div>
 
  
    <!-- Wisdom App -->
    <div class="category">
      <div class="category-header">BioX,PhyX,LangX</div>
      <div class="tools">
        <!-- Biology Tools -->
 <div class="bio">Biology
 
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/bones" target="_blank" title="Learn about human and animal bones, structure, and functions.">Bones</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/humanandfishanatomy" target="_blank" title="Explore human and fish anatomy with illustrations and detailed explanations.">Human and Fish Anatomy</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/plantantomy" target="_blank" title="Study plant anatomy, including structure of leaves, stems, roots, and flowers.">Plant Anatomy</a></li>

</div>

<div class="phy">Physics
  
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/physicsformulars" target="_blank" title="Access essential physics formulas for mechanics, electricity, and more.">Physics Formulas</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/physicsprinciplesexplorer" target="_blank" title="Interactive exploration of physics principles and experiments.">Principles Explorer</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/unitconverter" target="_blank" title="Convert units across physics measurements for easy calculations.">Unit Converter</a></li>
 
</div>

<div class="kisw">Kiswahili
 
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/kamusi" target="_blank" title="Swahili dictionary to understand meanings of words and phrases.">Kamusi</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/methali" target="_blank" title="Learn Swahili proverbs and their meanings for effective communication.">Methali</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/nahaunamisema" target="_blank" title="Common Swahili sayings and idioms with explanations.">Nahau na Misemo</a></li>
 
</div>

<div class="eng">English
 
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/dictionary" target="_blank" title="English dictionary for word meanings and pronunciation.">Dictionary</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/ideoms" target="_blank" title="Collection of English idioms with explanations and examples.">Idioms</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/proverbs" target="_blank" title="Popular English proverbs and their interpretations.">Proverbs</a></li>
    <li><a href="https://elimuconnect.github.io/ELIMU-CONNECT-/similiesandmetaphors" target="_blank" title="Examples of similes and metaphors used in English writing.">Similes and Metaphors</a></li>
  
</div>

 </div>
      </div>
  







   
    <div class="category">
      <div class="category-header"><strong>External Resources</strong><br> â€“ These are trusted external websites and tools designed to help teachers, students<br>
 , 
 and educators improve learning, teaching, and exam preparation.<br> Feel free to use them as needed!</div>
      <div class="tools">
  <!-- External Education Resources -->
 
  <li>
  <a href="https://www.calculator.net/scientific-calculator.html" target="_blank" title="Online scientific calculator for complex calculations, including trigonometry, logarithms, and more.">
    Scientific Calculator
  </a>
</li>

  <li><a href="https://worksheetzone.org" target="_blank" title="Provides downloadable worksheets for various subjects and grades.">Worksheet Zone</a></li>
  <li><a href="https://webflow-dev.quizizz.com/homepage-au?lng=en" target="_blank" title="Interactive quizzes and assessments for students with real-time feedback.">Quizizz</a></li>
  <li><a href="https://www.labxchange.org/" target="_blank" title="Virtual lab simulations and science resources for hands-on learning.">LabXchange</a></li>
  <li><a href="https://phet.colorado.edu/" target="_blank" title="Physics, chemistry, and math interactive simulations for classrooms.">PhET Simulations</a></li>
  <li><a href="https://www.mentimeter.com/" target="_blank" title="Create interactive presentations and polls to engage students.">Mentimeter</a></li>
  <li><a href="https://kahoot.it/" target="_blank" title="Game-based quizzes and learning competitions to make lessons fun.">Kahoot!</a></li>
  <li><a href="https://gemini.google.com/app" target="_blank" title="Google AI assistant for generating ideas, summaries, and content.">Google Gemini</a></li>
  <li><a href="https://chatgpt.com/" target="_blank" title="AI chatbot for explanations, tutoring, lesson ideas, and more.">ChatGPT</a></li>
  <li><a href="https://classroom.google.com/" target="_blank" title="Organize classes, assignments, and communicate with students online.">Google Classroom</a></li>
  <li><a href="https://www.instructure.com/" target="_blank" title="Canvas LMS: Manage courses, assignments, grading, and collaboration.">Canvas</a></li>
  <li><a href="https://nearpod.com/" target="_blank" title="Interactive lessons, quizzes, and virtual classroom engagement tools.">Nearpod</a></li>
  <li><a href="https://www.peardeck.com/" target="_blank" title="Integrates with slides to make interactive presentations for students.">Pear Deck</a></li>
  <li><a href="https://www.socrative.com/" target="_blank" title="Real-time quizzes, polls, and assessment tools for classroom feedback.">Socrative</a></li>
  <li><a href="https://get.plickers.com/" target="_blank" title="Instant student assessments using a camera and printed cards.">Plickers</a></li>
  <li><a href="https://www.canva.com/education/" target="_blank" title="Create educational graphics, presentations, and collaborative designs.">Canva for Education</a></li>
  <li><a href="https://docs.google.com/forms/u/0/" target="_blank" title="Build surveys, quizzes, and collect student responses easily.">Google Forms</a></li>
  <li><a href="https://copilot.microsoft.com/" target="_blank" title="AI assistant integrated with Microsoft 365 to enhance productivity.">Microsoft Copilot</a></li>
  <li><a href="https://www.microsoft.com/en-us/microsoft-365/powerpoint?msockid=0b39fb68677a6b4a3a2aed3d66f86a3a" target="_blank" title="Create interactive slides, presentations, and learning materials.">Microsoft PowerPoint</a></li>
  <li><a href="https://edpuzzle.com/" target="_blank" title="Turn videos into interactive lessons with embedded questions.">Edpuzzle</a></li>
  <li><a href="https://quizlet.com/" target="_blank" title="Flashcards, games, and study sets to reinforce learning.">Quizlet</a></li>
  <li><a href="https://onenote.cloud.microsoft/" target="_blank" title="Digital notebook for organizing lesson plans and notes.">OneNote</a></li>
  <li><a href="https://trello.com/" target="_blank" title="Project management tool to organize tasks, lessons, and teamwork.">Trello</a></li>
  <li><a href="https://ed.ted.com/" target="_blank" title="Curated educational videos with interactive questions for learning.">TED-Ed</a></li>
  <li><a href="https://www.polleverywhere.com/" target="_blank" title="Live polling and audience interaction during lessons.">Poll Everywhere</a></li>
  <li><a href="https://answergarden.ch/" target="_blank" title="Create simple online polls or brainstorming word clouds.">AnswerGarden</a></li>
  <li><a href="https://www.microsoft.com/en/education" target="_blank" title="Microsoft Education portal with resources, lesson plans, and tools.">Microsoft Education</a></li>
  <li><a href="https://www.socialcreator.com/pastpapersandquizes" target="_blank" title="Access past papers, quizzes, and practice resources for students.">All Resources</a></li>
  <li><a href="https://kcserevision.com/" target="_blank" title="Past papers, revision notes, and exam preparation for KCSE.">KCSE Revision</a></li>
  <li><a href="https://teacher.co.ke/" target="_blank" title="Teacher resources, tips, and education news in Kenya.">Teacher.co.ke</a></li>


 
  
</div>
    </div>
  



    <!-- Wisdom App -->
    <div class="category">
      <div class="category-header">TPAD,TPAY,ZERAKI,TSC WEBSITE</div>
      <div class="tools">
  <!-- External Education Resources -->
 
 
  <li><a href="https://teachersonline.tsc.go.ke/" target="_blank" title="Official portal for teachers to access personal records,and professional updates.">Teachers Online TSC</a></li>
  <li><a href="https://tpay.tsc.go.ke/fa392bf9a4692aa0cc/zln" target="_blank" title="Online platform for TSC teachers to access payslips and P9">TPay TSC</a></li>
  <li><a href="https://tpad2.tsc.go.ke/" target="_blank" title="Teacher Performance Appraisal and Development system to monitor and record teacher performance.">TPAD2 TSC</a></li>
  <li><a href="https://www.zeraki.app/zeraki-analytics" target="_blank" title="Analytics platform to monitor student performance and school metrics using data dashboards.">Zeraki Analytics</a></li>


</div>
    </div>
 
</div>


<footer>
  &copy; 2025 <strong>Smart Elimu Connect</strong>. All rights reserved.  
  
</footer>


<!-- Full Page Payment Lock -->
<div id="accessModal" style="
    position: fixed; top:0; left:0; width:100%; height:100%;
    background: #ffffff; display:flex; justify-content:center; align-items:center;
    z-index:99999; flex-direction: column;
">
  <div style="
      background:#fff; padding:30px 25px; border-radius:12px; max-width:400px;
      text-align:center; font-family:Segoe UI, sans-serif; color:#033a63;
      box-shadow:0 6px 20px rgba(0,0,0,0.3);
  ">
    <p id="accessMessage" style="font-size:1rem; margin-bottom:20px;"></p>
    <button id="accessBtn" style="
        background:#0078D7; color:#fff; border:none; padding:12px 20px;
        border-radius:8px; font-weight:600; cursor:pointer;
        font-size:1em;
    ">Sign in with Google</button>
  </div>
</div>

<!-- Countdown Display (Top Right) -->
<p id="accessCountdown" style="
    position: fixed; top:10px; right:10px; 
    background: #0078D7; color: #fff; padding: 8px 12px;
    border-radius: 6px; font-family: 'Segoe UI', sans-serif; 
    font-weight:600; z-index:99999; display:none;
"></p>

<p id="accessType" style="
    position: fixed; top:50px; right:10px;
    padding:6px 10px;
    border-radius:6px; font-family:'Segoe UI', sans-serif;
    font-weight:600; z-index:99999; display:none;
"></p>

<div id="adminAccess" style="
    display:none; position:fixed; top:10px; left:50%; transform:translateX(-50%);
    background:#2a9d8f; color:#fff; padding:10px 16px; border-radius:8px; z-index:99999;
    font-weight:600; font-family:Segoe UI,sans-serif;
">
  Admin Access Active
</div>


<div id="adminTools" style="display:none; position:fixed; top:50px; left:50%; transform:translateX(-50%);
 background:#fff; padding:12px 20px; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,.2); z-index:99999;">
  
  <input type="email" id="newTeacherEmail" placeholder="Teacher Email" style="padding:6px 10px;">

  <button onclick="adminAddTeacher()" style="margin-left:6px;">
    Add Teacher
  </button>

  <button onclick="adminDeleteTeacher()" style="margin-left:6px; background:#e63946; color:#fff;">
    Delete Teacher
  </button>

</div>


	

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
// ================= FIREBASE =================
firebase.initializeApp({
  apiKey: "AIzaSyCAiOSHmURDyAAYm5EmoomLkZ_Aud7iXIQ",
  authDomain: "cbc-general.firebaseapp.com",
  databaseURL: "https://cbc-general-default-rtdb.firebaseio.com",
  projectId: "cbc-general",
  storageBucket: "cbc-general.firebasestorage.app",
  messagingSenderId: "764732839741",
  appId: "1:764732839741:web:ab829af54839de91359754"
});

const db = firebase.database();
const auth = firebase.auth();
const PAYMENT_LINK = "https://paystack.shop/pay/b-fmc6kyut";
const ACCESS_DURATION = 24*60*60*1000; // 24 hours

// ===== HELPERS =====
function getQueryParam(name){ return new URLSearchParams(window.location.search).get(name); }

function emailToKey(email){
    return email.toLowerCase().trim().replace(/\./g, ',');
}

function showAccessModal(msg, showButton=true, btnText="Sign in with Google"){
    const modal = document.getElementById('accessModal');
    const btn = document.getElementById('accessBtn');
    document.getElementById('accessMessage').innerHTML = msg;
    modal.style.display = "flex";
    btn.style.display = showButton ? "inline-block" : "none";
    btn.textContent = btnText;
}
function hideAccessModal(){ document.getElementById('accessModal').style.display="none"; }

function startCountdown(expiresAt){
    const countdownEl = document.getElementById('accessCountdown');
    countdownEl.style.display="block";
    const interval = setInterval(()=>{
        const remaining = expiresAt - Date.now();
        if(remaining <= 0){
            clearInterval(interval);
            showAccessModal("Access expired. Please pay to continue.", true, "Pay Now");
            countdownEl.style.display="none";
        } else {
            countdownEl.textContent = `Paid access: ${Math.floor(remaining/3600000)}h ${Math.floor((remaining%3600000)/60000)}m`;
        }
    },1000);
}





// Check if teacher has access via their admin
async function checkTeacherAccess(email){
    const key = emailToKey(email);
    const snap = await db.ref("schooltools/teachers").child(key).get();
    if(!snap.exists()) return false;

    const adminEmail = snap.val().addedBy;
    if(!adminEmail) return false;

    const activeAdmin = await checkAdminAccess(adminEmail);
    return !!activeAdmin;
}








async function saveAccess(user, reference) {
    if (!reference) return false;

    const refPath = `paystackRefs/${reference}`;
    const refSnap = await db.ref(refPath).get();

    // If the reference already exists, don't allow reuse
    if (refSnap.exists()) return false;

    const expiresAt = Date.now() + ACCESS_DURATION;

    // Save reference in the database for admin
    await db.ref(refPath).set({
        email: user.email,      // Admin email
        reference,
        createdAt: Date.now(),
        expiresAt
    });

    // Remove reference from URL
    if (window.history.replaceState) {
        const cleanUrl = window.location.origin + window.location.pathname;
        window.history.replaceState(null, '', cleanUrl);
    }

    // Hide modal and start countdown for admin
    hideAccessModal();
    startCountdown(expiresAt);

    // Show access type label
    const label = document.getElementById("accessType");
    label.style.display = "block";
    label.style.background = "#0078D7";
    label.textContent = "Access type: Paid (Admin)";

    // Grant access to all teachers added by this admin
    const teachersSnap = await db.ref("schooltools/teachers").get();
    if (teachersSnap.exists()) {
        const updates = {};
        teachersSnap.forEach(snap => {
            const teacherKey = snap.key;
            const teacherData = snap.val();
            if (teacherData.addedBy === user.email) {
                // Mark teacher as active with same expiration
                updates[`schooltools/teachers/${teacherKey}/expiresAt`] = expiresAt;
            }
        });
        if (Object.keys(updates).length > 0) {
            await db.ref().update(updates);
        }
    }

    return true;
}




		
// ===== ADMINS & TEACHERS =====
const adminEmails = ["wamithisolomon@gmail.com"];
const MAX_TEACHERS = 30;

function showAdminAccess(){
    document.getElementById("adminAccess").style.display = "block";
    document.getElementById("adminTools").style.display = "block";
}


async function addTeacher(email){
    const key = emailToKey(email);
    const teachersRef = db.ref("schooltools/teachers");
    const snap = await teachersRef.get();
    const currentTeachers = snap.exists() ? Object.keys(snap.val()) : [];
    if(currentTeachers.length >= MAX_TEACHERS){
        alert("Maximum of 30 teachers reached!");
        return false;
    }

    // Save teacher with admin email as addedBy
    const currentUser = auth.currentUser;
    if(!currentUser) return alert("Admin not signed in");

    await teachersRef.child(key).set({
        addedBy: currentUser.email
    });

    alert(`Teacher ${email} added successfully`);
    return true;
}


async function adminDeleteTeacher(){
    const email = document.getElementById("newTeacherEmail").value;
    if(!email) return alert("Enter teacher email");

    const key = emailToKey(email);
    const currentUser = auth.currentUser;
    if(!currentUser) return alert("Admin not signed in");

    const teacherRef = db.ref("schooltools/teachers").child(key);
    const snap = await teacherRef.get();

    if(!snap.exists()){
        return alert("Teacher not found");
    }

    // ðŸ” Security: only allow deleting teachers added by THIS admin
    if(snap.val().addedBy !== currentUser.email){
        return alert("You can only delete teachers you added");
    }

    const confirmDelete = confirm(`Delete teacher ${email}?`);
    if(!confirmDelete) return;

    await teacherRef.remove();
    alert(`Teacher ${email} deleted successfully`);
}



	
	
async function checkAdmin(email){
    email = email.toLowerCase().trim();
    // Make sure adminEmails are lowercase too
    const normalizedAdmins = adminEmails.map(e => e.toLowerCase().trim());
    if(normalizedAdmins.includes(email)){
        showAdminAccess();
        return true;
    }
    return false;
}



async function checkTeacher(email){
    const key = emailToKey(email);
    const snap = await db.ref("schooltools/teachers").child(key).get();
    return snap.exists();
}

// ===== ADMIN TOOL FUNCTION =====
function adminAddTeacher(){
    const email = document.getElementById("newTeacherEmail").value;
    if(!email) return alert("Enter teacher email");
    addTeacher(email);
}


async function checkAdminAccess(email) {
    const key = emailToKey(email);
    try {
        const snap = await db.ref("paystackRefs").get();
        if (!snap.exists()) return false; // no references yet

        let active = null;
        snap.forEach(s => {
            const data = s.val();
            if (data && data.email && data.expiresAt) {
                if (emailToKey(data.email) === key && Date.now() <= data.expiresAt) {
                    active = { expiresAt: data.expiresAt };
                }
            }
        });

        if (active) {
            startCountdown(active.expiresAt);
            const label = document.getElementById("accessType");
            label.style.display = "block";
            label.style.background = "#0078D7";
            label.textContent = "Access type: Paid Admin";
            return true;
        }

        return false;
    } catch (err) {
        console.error("checkAdminAccess error:", err);
        return false;
    }
}



// ===== MAIN FLOW =====
(async function() {
    const reference = getQueryParam("reference");

    auth.onAuthStateChanged(async user => {
    const reference = getQueryParam("reference");

    if (!user) {
        // Not signed in â†’ show Google login
        showAccessModal("Please sign in with Google to continue.", true, "Sign in with Google");

        const btn = document.getElementById("accessBtn");
        btn.onclick = async () => {
            btn.disabled = true;
            btn.textContent = "Signing in...";

            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                const result = await auth.signInWithPopup(provider);
                if (!result.user) throw "No user";
                // DO NOTHING ELSE HERE
                // onAuthStateChanged will handle access
            } catch (e) {
                btn.disabled = false;
                btn.textContent = "Sign in with Google";
                alert("Sign-in failed. Please try again.");
                console.error(e);
            }
        };
    } else {
        // Already signed in â†’ handle access
        await handleAccess(user, reference);
    }
});

// Prevent double execution
let handlingAccess = false;

async function handleAccess(user, reference) {
    if (handlingAccess) return;
    handlingAccess = true;

    try {
        // Small delay to ensure Firebase auth state is fully ready
        await new Promise(r => setTimeout(r, 300));

        const email = user.email.toLowerCase().trim();
        const normalizedAdmins = adminEmails.map(e => e.toLowerCase().trim());
        const isAdmin = normalizedAdmins.includes(email);
        let allowed = false;

        const btn = document.getElementById("accessBtn");

        if (isAdmin) {
            // Admin: check if already paid
            allowed = await checkAdminAccess(email);

            // Save access if reference exists in URL
            if (reference && !allowed) {
                allowed = await saveAccess(user, reference);
            }

            if (allowed) {
                showAdminAccess(); // show admin tools
                hideAccessModal();
            } else {
                showAccessModal("Admin access required. Please pay to unlock features.", true, "Pay Now");
                btn.onclick = () => window.location.href = PAYMENT_LINK;
                btn.disabled = false; // ensure button is clickable
            }
        } else {
            // Teacher: check admin's paid access
            allowed = await checkTeacherAccess(email);

            if (!allowed) {
                showAccessModal("Access denied. Ask your admin to pay for access.", true, "Ask Admin");
                btn.onclick = () => alert("Ask your admin to pay for access.");
                btn.disabled = false; // ensure button is clickable
            } else {
                hideAccessModal();
            }
        }

    } catch (err) {
        console.error(err);
        alert("Error checking access. Please try again.");
    } finally {
        handlingAccess = false;
    }
}


})();



</script>
</body>
</html>
