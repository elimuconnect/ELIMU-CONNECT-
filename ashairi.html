<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Poem Singer</title>
</head>
<body>
  <button onclick="startSinging()">ðŸŽ¶ Sing Poem</button>

  <script>
  let voices = [];
  let selectedVoice = null;

  const poem = [
    "The sun is rising, bright and high,",
    "Painting colors across the sky.",
    "Birds are singing, soft and sweet,",
    "Morning comes with dancing feet."
  ];

  function getVoice() {
    voices = speechSynthesis.getVoices();
    return voices.find(v => v.lang.startsWith("en-GB") && v.name.toLowerCase().includes("female"))
      || voices.find(v => v.lang.startsWith("en"))
      || voices[0];
  }

  speechSynthesis.onvoiceschanged = () => {
    selectedVoice = getVoice();
  };

  function singLine(line, pitch, rate, onEnd) {
    const utter = new SpeechSynthesisUtterance(line);
    utter.voice = selectedVoice;
    utter.pitch = pitch;   // controls "tone" -> singing effect
    utter.rate = rate;     // controls rhythm
    utter.onend = onEnd;
    speechSynthesis.speak(utter);
  }

  function startSinging() {
    if (!selectedVoice) selectedVoice = getVoice();

    let i = 0;
    function nextLine() {
      if (i < poem.length) {
        // alternate pitch for melody
        let pitch = (i % 2 === 0) ? 1.6 : 0.9; 
        let rate = (i % 2 === 0) ? 0.85 : 0.95;
        singLine(poem[i], pitch, rate, () => {
          i++;
          setTimeout(nextLine, 400); // pause before next line
        });
      }
    }
    nextLine();
  }
  </script>
</body>
</html>



