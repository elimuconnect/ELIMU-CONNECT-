<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shorts Combiner ‚Äì Offline & Browser Safe</title>
</head>
<body>
<h2>üé¨ Combine Shorts into One Long Video</h2>
<input type="file" id="videoInput" multiple accept="video/mp4,video/webm"><br><br>
<button id="combineBtn">Combine All</button>
<p id="status"></p>
<video id="preview" controls width="480"></video>

<!-- ‚úÖ Use browser-compatible build -->
<script src="https://unpkg.com/@ffmpeg/ffmpeg@0.10.1/dist/ffmpeg.min.js"></script>

<script>
const { createFFmpeg, fetchFile } = FFmpeg;
const ffmpeg = createFFmpeg({ log: true });
const combineBtn = document.getElementById('combineBtn');
const statusEl = document.getElementById('status');
const preview = document.getElementById('preview');

combineBtn.onclick = async () => {
  const files = document.getElementById('videoInput').files;
  if (files.length === 0) return alert("Select at least one short!");

  statusEl.textContent = "‚è≥ Loading FFmpeg engine...";
  await ffmpeg.load();

  // Write all video files to memory
  for (let i = 0; i < files.length; i++) {
    ffmpeg.FS('writeFile', `input${i}.mp4`, await fetchFile(files[i]));
  }

  // Create a text list of videos to concatenate
  let listTxt = '';
  for (let i = 0; i < files.length; i++) listTxt += `file 'input${i}.mp4'\n`;
  ffmpeg.FS('writeFile', 'list.txt', listTxt);

  statusEl.textContent = "‚öôÔ∏è Combining videos, please wait...";

  // Run ffmpeg concat
  await ffmpeg.run('-f', 'concat', '-safe', '0', '-i', 'list.txt', '-c', 'copy', 'output.mp4');

  // Read the output and show preview
  const data = ffmpeg.FS('readFile', 'output.mp4');
  const videoURL = URL.createObjectURL(new Blob([data.buffer], { type: 'video/mp4' }));

  preview.src = videoURL;
  statusEl.textContent = "‚úÖ Done! Combined video ready below.";
};
</script>
</body>
</html>


   
