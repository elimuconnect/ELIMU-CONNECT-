<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Accessibility Tool for Learners with Special Needs</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      padding: 20px;
    }
    .tabs {
      display: flex;
      margin-bottom: 20px;
    }
    .tab {
      flex: 1;
      padding: 10px;
      background: #ccc;
      cursor: pointer;
      text-align: center;
      font-weight: bold;
    }
    .tab.active {
      background: #0066cc;
      color: white;
    }
    .panel {
      display: none;
      background: white;
      padding: 20px;
      border-radius: 10px;
    }
    .panel.active {
      display: block;
    }
    button, select, input, textarea {
      margin: 10px 0;
      padding: 10px;
      font-size: 16px;
    }
    .large-text textarea {
      font-size: 24px;
    }
    .high-contrast {
      background: black !important;
      color: yellow !important;
    }
    .flashing {
      animation: flash 1s infinite;
    }
    @keyframes flash {
      0% { background: yellow; }
      50% { background: red; }
      100% { background: yellow; }
    }
  </style>
</head>
<body>

<h2 id="title">Accessibility Tool for Learners with Special Needs</h2>

<div role="tablist" aria-label="Accessibility Tabs" class="tabs">
  <button role="tab" aria-selected="true" id="tab1" class="tab active" onclick="switchTab('visual')">For Visually Impaired</button>
  <button role="tab" aria-selected="false" id="tab2" class="tab" onclick="switchTab('hearing')">For Hearing Impaired</button>
</div>

<div id="visual" class="panel active" role="tabpanel" tabindex="0" aria-labelledby="tab1">
  <h3 id="tts_label">Text-to-Speech Reader</h3>
  <textarea id="ttsText" rows="4" cols="50" placeholder="Type text here..."></textarea><br>
  <label for="voiceSelect">Select Voice Language:</label>
  <select id="voiceSelect"></select><br>
  <button onclick="readText()">üîä Read Aloud</button>
  <button onclick="startRecognition()">üéôÔ∏è Speak (Speech-to-Text)</button>
  <div id="outputText"></div>
  <h3>Display Options</h3>
  <button onclick="toggleLargeText()">üÖ∞Ô∏è Toggle Large Text</button>
  <button onclick="toggleContrast()">üé® Toggle High Contrast</button>
</div>

<div id="hearing" class="panel" role="tabpanel" tabindex="0" aria-labelledby="tab2">
  <h3>Visual Alerts</h3>
  <button onclick="showAlert()">üö® Simulate Alert</button>
  <div id="alertBox" style="width:100%;height:50px;margin-top:10px;"></div>
  <h3>Predefined Communication</h3>
  <select onchange="sayPreset(this.value)">
    <option value="">-- Select a phrase --</option>
    <option value="I need help.">I need help.</option>
    <option value="Can you repeat that?">Can you repeat that?</option>
    <option value="I am going to the bathroom.">I am going to the bathroom.</option>
  </select>
  <h3>Sign Language Guide</h3>
  <video width="320" controls>
    <source src="ksl_hello.mp4" type="video/mp4">
    Sign language video not supported.
  </video>
</div>

<select onchange="translatePage(this.value)">
  <option value="en">English</option>
  <option value="sw">Kiswahili</option>
</select>

<script>
  function switchTab(tabName) {
    document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.panel').forEach(panel => panel.classList.remove('active'));
    document.getElementById(tabName).classList.add('active');
    document.querySelector(\`.tab[onclick*="\${tabName}"]\`).classList.add('active');
  }

  function populateVoices() {
    const select = document.getElementById('voiceSelect');
    select.innerHTML = '';
    const voices = speechSynthesis.getVoices();
    voices.forEach((voice, i) => {
      const option = document.createElement('option');
      option.value = i;
      option.textContent = \`\${voice.name} (\${voice.lang})\`;
      select.appendChild(option);
    });
  }

  speechSynthesis.onvoiceschanged = populateVoices;

  function readText() {
    const text = document.getElementById('ttsText').value;
    const msg = new SpeechSynthesisUtterance(text);
    const selectedVoice = speechSynthesis.getVoices()[document.getElementById('voiceSelect').value];
    if (selectedVoice) msg.voice = selectedVoice;
    speechSynthesis.speak(msg);
  }

  function toggleLargeText() {
    document.getElementById('visual').classList.toggle('large-text');
  }

  function toggleContrast() {
    document.body.classList.toggle('high-contrast');
  }

  function showAlert() {
    const box = document.getElementById('alertBox');
    box.classList.add('flashing');
    setTimeout(() => box.classList.remove('flashing'), 4000);
  }

  function sayPreset(text) {
    if (text) {
      const msg = new SpeechSynthesisUtterance(text);
      speechSynthesis.speak(msg);
    }
  }

  function startRecognition() {
    if (!('webkitSpeechRecognition' in window)) {
      alert("Speech Recognition not supported in this browser.");
      return;
    }
    const recognition = new webkitSpeechRecognition();
    recognition.lang = 'en-KE';
    recognition.continuous = false;
    recognition.interimResults = false;
    recognition.onresult = function(event) {
      document.getElementById('outputText').innerText = event.results[0][0].transcript;
    };
    recognition.onerror = function(event) {
      alert('Speech recognition error: ' + event.error);
    };
    recognition.start();
  }

  const translations = {
    en: {
      title: "Accessibility Tool for Learners with Special Needs",
      tts_label: "Text-to-Speech Reader"
    },
    sw: {
      title: "Zana ya Usaidizi kwa Wanafunzi Wenye Mahitaji Maalum",
      tts_label: "Kisoma Maandishi kwa Sauti"
    }
  };

  function translatePage(lang) {
    document.getElementById('title').textContent = translations[lang].title;
    document.getElementById('tts_label').textContent = translations[lang].tts_label;
  }
</script>

</body>
</html>
